<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Live Gradient</title>
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #d6dffa;
    }

    #blob-layer {
      position: fixed;
      inset: 0;
      filter: blur(90px) saturate(1.15);
    }

    .blob {
      position: absolute;
      border-radius: 50%;
      will-change: left, top;
    }

    #grain {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 50;
      opacity: 0.22;
      mix-blend-mode: overlay;
    }
  </style>
</head>
<body>

  <div id="blob-layer"></div>
  <canvas id="grain"></canvas>

  <script>
    // ─── Blobs ─────────────────────────────────────────────────────────────────
    const layer = document.getElementById('blob-layer');

    const defs = [
      // sx/sy = start position (0–1), ax/ay = sway amplitude, vx/vy = speed, px/py = phase offset
      { hex: '#1236d9', alpha: 0.90, sz: 0.78, sx: 0.22, sy: 0.66, ax: 0.13, ay: 0.11, vx: 2.8e-4, vy: 3.5e-4, px: 0.00, py: 1.20 },
      { hex: '#0c22cc', alpha: 0.85, sz: 0.68, sx: 0.72, sy: 0.26, ax: 0.11, ay: 0.13, vx: 3.4e-4, vy: 2.7e-4, px: 2.10, py: 0.80 },
      { hex: '#1a3df5', alpha: 0.80, sz: 0.60, sx: 0.52, sy: 0.74, ax: 0.14, ay: 0.10, vx: 4.1e-4, vy: 3.8e-4, px: 4.00, py: 3.50 },
      { hex: '#ffffff', alpha: 0.95, sz: 0.44, sx: 0.17, sy: 0.20, ax: 0.09, ay: 0.08, vx: 3.0e-4, vy: 4.0e-4, px: 1.00, py: 4.80 },
      { hex: '#ffffff', alpha: 0.88, sz: 0.38, sx: 0.80, sy: 0.54, ax: 0.10, ay: 0.11, vx: 3.8e-4, vy: 3.0e-4, px: 3.20, py: 2.00 },
      { hex: '#2244ff', alpha: 0.75, sz: 0.55, sx: 0.44, sy: 0.38, ax: 0.08, ay: 0.10, vx: 2.5e-4, vy: 3.2e-4, px: 5.50, py: 1.50 },
      { hex: '#c8d8ff', alpha: 0.70, sz: 0.42, sx: 0.86, sy: 0.84, ax: 0.11, ay: 0.09, vx: 3.5e-4, vy: 2.8e-4, px: 0.50, py: 3.00 },
      { hex: '#0f25cc', alpha: 0.72, sz: 0.50, sx: 0.08, sy: 0.50, ax: 0.07, ay: 0.12, vx: 2.2e-4, vy: 3.3e-4, px: 6.00, py: 0.40 },
    ];

    function hexToRgb(hex) {
      const n = parseInt(hex.slice(1), 16);
      return [(n >> 16) & 255, (n >> 8) & 255, n & 255];
    }

    function buildGradient(hex, alpha) {
      const [r, g, b] = hexToRgb(hex);
      const a1 = Math.round(alpha * 255).toString(16).padStart(2, '0');
      const a2 = Math.round(alpha * 0.45 * 255).toString(16).padStart(2, '0');
      return `radial-gradient(circle, ${hex}${a1} 0%, ${hex}${a2} 42%, transparent 72%)`;
    }

    const blobEls = defs.map(d => {
      const base = Math.max(window.innerWidth, window.innerHeight);
      const size = base * d.sz;
      const el = document.createElement('div');
      el.className = 'blob';
      el.style.cssText = `
        width:${size}px; height:${size}px;
        background:${buildGradient(d.hex, d.alpha)};
        left:${d.sx * 100}%;
        top:${d.sy * 100}%;
        transform:translate(-50%,-50%);
      `;
      layer.appendChild(el);
      return { el, ...d };
    });

    function animate(t) {
      for (const b of blobEls) {
        const x = b.sx + b.ax * Math.sin(t * b.vx + b.px);
        const y = b.sy + b.ay * Math.cos(t * b.vy + b.py);
        b.el.style.left = (x * 100) + '%';
        b.el.style.top  = (y * 100) + '%';
      }
      requestAnimationFrame(animate);
    }
    requestAnimationFrame(animate);

    // ─── Grain ─────────────────────────────────────────────────────────────────
    const grainCanvas = document.getElementById('grain');
    const gCtx = grainCanvas.getContext('2d');

    function paintGrain() {
      const w = window.innerWidth;
      const h = window.innerHeight;
      grainCanvas.width  = w;
      grainCanvas.height = h;

      const img  = gCtx.createImageData(w, h);
      const data = img.data;

      // Use a fast LCG-style RNG so full-HD grain renders instantly
      let seed = (Math.random() * 0xffffffff) >>> 0;
      for (let i = 0; i < data.length; i += 4) {
        seed = (seed * 1664525 + 1013904223) & 0xffffffff;
        const v = (seed >>> 24);
        data[i]     = v;
        data[i + 1] = v;
        data[i + 2] = v;
        data[i + 3] = 255;
      }
      gCtx.putImageData(img, 0, 0);
    }

    paintGrain();
    window.addEventListener('resize', paintGrain);
  </script>
</body>
</html>
